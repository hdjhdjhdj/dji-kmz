(()=>{"use strict";let e;var r={14734:function(e){e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},17282:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=r.deserialize=r.registerSerializer=void 0;let s=t(99017),n=s.DefaultSerializer;r.registerSerializer=function(e){n=s.extendSerializer(n,e)};r.deserialize=function(e){return n.deserialize(e)};r.serialize=function(e){return n.serialize(e)}},99017:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultSerializer=r.extendSerializer=void 0;r.extendSerializer=function(e,r){let t=e.deserialize.bind(e),s=e.serialize.bind(e);return{deserialize:e=>r.deserialize(e,t),serialize:e=>r.serialize(e,s)}};let t={deserialize:e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),serialize:e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack})},s=e=>e&&"object"==typeof e&&"__error_marker"in e&&"$$error"===e.__error_marker;r.DefaultSerializer={deserialize:e=>s(e)?t.deserialize(e):e,serialize:e=>e instanceof Error?t.serialize(e):e}},50036:function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0,r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},90720:function(e,r,t){Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.isTransferDescriptor=void 0;let s=t(50036);r.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[s.$transferable]};r.Transfer=function(e,r){if(!r){var t;if(!((t=e)&&"object"==typeof t))throw Error();r=[e]}return{[s.$transferable]:!0,send:e,transferables:r}}},75685:function(e,r){var t,s,n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(n=r.MasterMessageType||(r.MasterMessageType={})).cancel="cancel",n.run="run",(i=r.WorkerMessageType||(r.WorkerMessageType={})).error="error",i.init="init",i.result="result",i.running="running",i.uncaughtError="uncaughtError"},93071:function(e,r){Object.defineProperty(r,"__esModule",{value:!0});r.default={isWorkerRuntime:function(){let e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return"undefined"!=typeof self&&!!self.postMessage&&!e},postMessageToMaster:function(e,r){self.postMessage(e,r)},subscribeToMasterMessages:function(e){let r=r=>{e(r.data)};return self.addEventListener("message",r),()=>{self.removeEventListener("message",r)}}}},665:function(e,r,t){var s=this&&this.__awaiter||function(e,r,t,s){return new(t||(t=Promise))(function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function a(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var r;e.done?n(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(o,a)}l((s=s.apply(e,r||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;let i=n(t(14734)),o=t(17282),a=t(90720),l=t(75685),u=n(t(93071));var f=t(17282);Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return f.registerSerializer}});var c=t(90720);Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),r.isWorkerRuntime=u.default.isWorkerRuntime;let d=!1,p=new Map,y=e=>e&&e.type===l.MasterMessageType.cancel,b=e=>e&&e.type===l.MasterMessageType.run,m=e=>i.default(e)||function(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}(e);function g(e){return a.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function M(e,r){let{payload:t,transferables:s}=g(r),n={type:l.WorkerMessageType.error,uid:e,error:o.serialize(t)};u.default.postMessageToMaster(n,s)}function h(e,r,t){let{payload:s,transferables:n}=g(t),i={type:l.WorkerMessageType.result,uid:e,complete:!!r||void 0,payload:s};u.default.postMessageToMaster(i,n)}function v(e){try{let r={type:l.WorkerMessageType.uncaughtError,error:o.serialize(e)};u.default.postMessageToMaster(r)}catch(r){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",r,"\nOriginal error:",e)}}function T(e,r,t){return s(this,void 0,void 0,function*(){let s;try{s=r(...t)}catch(r){return M(e,r)}if(!function(e,r){let t={type:l.WorkerMessageType.running,uid:e,resultType:r};u.default.postMessageToMaster(t)}(e,m(s)?"observable":"promise"),m(s)){let r=s.subscribe(r=>h(e,!1,o.serialize(r)),r=>{M(e,o.serialize(r)),p.delete(e)},()=>{h(e,!0),p.delete(e)});p.set(e,r)}else try{let r=yield s;h(e,!0,o.serialize(r))}catch(r){M(e,o.serialize(r))}})}r.expose=function(e){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(d)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(d=!0,"function"==typeof e)u.default.subscribeToMasterMessages(r=>{b(r)&&!r.method&&T(r.uid,e,r.args.map(o.deserialize))}),!function(){let e={type:l.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(e)}();else if("object"==typeof e&&e)u.default.subscribeToMasterMessages(r=>{b(r)&&r.method&&T(r.uid,e[r.method],r.args.map(o.deserialize))}),!function(e){let r={type:l.WorkerMessageType.init,exposed:{type:"module",methods:e}};u.default.postMessageToMaster(r)}(Object.keys(e).filter(r=>"function"==typeof e[r]));else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);u.default.subscribeToMasterMessages(e=>{if(y(e)){let r=e.uid,t=p.get(r);t&&(t.unsubscribe(),p.delete(r))}})},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",e=>{setTimeout(()=>v(e.error||e),250)}),self.addEventListener("unhandledrejection",e=>{let r=e.reason;r&&"string"==typeof r.message&&setTimeout(()=>v(r),250)})),"undefined"!=typeof process&&"function"==typeof process.on&&u.default.isWorkerRuntime()&&(process.on("uncaughtException",e=>{setTimeout(()=>v(e),250)}),process.on("unhandledRejection",e=>{e&&"string"==typeof e.message&&setTimeout(()=>v(e),250)}))}},t={};function s(e){var n=t[e];if(void 0!==n)return n.exports;var i=t[e]={exports:{}};return r[e].call(i.exports,i,i.exports,s),i.exports}s.rv=function(){return"1.0.0"},s.ruid="bundler=rspack@1.0.0";let n="/dji_wpmz";var i=s("665");let o=i.expose;i.registerSerializer,i.Transfer;importScripts("./libwpmz.js");let a=globalThis.WPMZModule().then(r=>{let t=(e=r).FS,s=e.IDBFS;try{t.lstat(n)}catch(e){t.mkdir(n),t.mount(s,{},n),t.chdir(n)}});async function l(r,t){await a;let s=new Uint8Array(r),i=e.FS,o=`${n}/${t}`;i.writeFile(o,s),i.syncfs(!1,e=>{})}o({async WebUnmarshalKmz(r,t){await l(r,t);let s=e.allocateUTF8("1.0"),i=`${n}/${t}`,o=e.allocateUTF8(i),a=e._malloc(4),u=0,f="";try{u=e._WebUnmarshalKmz(s,o,a),f=e.UTF8ToString(u)}catch(e){}return e._free(s),e._free(o),e._free(a),e._WebFreeMarshalMemory(u),f}})})();
//# sourceMappingURL=wpmz.wasm.worker.ef9c6d83.js.map